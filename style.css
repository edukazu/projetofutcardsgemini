/* style.css - Versão Final V10: Interação Corrigida & Pilha Inteligente */

/* RESET E BASE */
* { box-sizing: border-box; }

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    background-color: #1b5e20;
    color: #fff;
    overflow: hidden;
}

/* --- ÁREA DO CAMPO --- */
#game-area {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    background-image: radial-gradient(#2e7d32 1px, transparent 1px);
    background-size: 30px 30px;
    padding: 0 50px; 
    overflow: hidden; 
}

#pitch-container {
    width: 100%; 
    max-width: 1400px;
    height: 75%; 
    min-height: 500px;
    
    /* Grama */
    background-image: linear-gradient(to right, #43a047 0%, #43a047 50%, #4caf50 50%, #4caf50 100%);
    background-size: 10% 100%;
    
    border: 5px solid #fff;
    position: relative;
    display: flex;
    overflow: visible;
    box-shadow: 0 30px 60px rgba(0,0,0,0.6);

    /* Animação de Câmera */
    transition: all 1.2s cubic-bezier(0.25, 1, 0.5, 1); 
    transform-origin: center center;
    
    /* ESTADO PADRÃO (OVERVIEW) */
    transform: scale(0.9); 
}

/* LINHAS DO CAMPO */
#pitch-container::before { /* Linha Central */
    content: ''; position: absolute; top: 0; left: 50%; width: 4px; height: 100%;
    background-color: rgba(255,255,255,0.6); transform: translateX(-50%); z-index: 1;
}
#pitch-container::after { /* Círculo Central */
    content: ''; position: absolute; top: 50%; left: 50%; width: 200px; height: 200px;
    border: 4px solid rgba(255,255,255,0.6); border-radius: 50%;
    transform: translate(-50%, -50%); z-index: 1;
}
.defense-zone::before, .attack-zone::before { /* Grande Área */
    content: ''; position: absolute; top: 50%; width: 18%; height: 60%; 
    border: 4px solid rgba(255,255,255,0.6); transform: translateY(-50%); z-index: 1;
}
.defense-zone::before { left: 0; border-left: none; }
.attack-zone::before { right: 0; border-right: none; }

.field-zone { flex-grow: 1; position: relative; z-index: 2; }

/* GOLS */
.goal-structure {
    position: absolute; top: 50%; width: 80px; height: 180px; 
    transform: translateY(-50%); border: 4px solid #fff; z-index: 0;
    background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.2) 5px, rgba(255,255,255,0.2) 7px);
}
.goal-left { left: -84px; border-right: none; }
.goal-right { right: -84px; border-left: none; }

/* BOLA */
#ball-indicator {
    position: absolute; top: 50%; width: 30px; height: 30px;
    background: radial-gradient(circle at 35% 35%, #fff, #d50000);
    border: 2px solid #333; border-radius: 50%;
    box-shadow: 2px 5px 15px rgba(0,0,0,0.8);
    transform: translate(-50%, -50%);
    transition: left 1s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 20;
}

/* --- VISUAL DAS CARTAS & PILHA INTELIGENTE --- */
.cards-container {
    position: absolute;
    width: 100%;
    height: 100%;
    padding: 10px;
    z-index: 5;
    
    /* IMPORTANTE: Permite clicar através do container (para o campo), 
       mas precisamos reativar o clique nos filhos (.card-token) */
    pointer-events: none; 
    
    display: flex;
    justify-content: center; 
    gap: 20%; 
    align-items: center;
}

/* Colunas de Cartas */
.team-cluster {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 10px; /* Padrão: Com espaçamento */
    max-height: 100%;
}

/* --- LÓGICA DE PILHA (Só ativa se tiver 5 ou mais cartas) --- */
.team-cluster:has(.card-token:nth-child(5)) {
    gap: 0; /* Remove gap na lotação */
}

/* Aplica margem negativa APENAS se estiver no modo pilha (5+ cartas) */
.team-cluster:has(.card-token:nth-child(5)) .card-token:not(:first-child) {
    margin-top: -25px; /* Sobreposição suave */
}

/* TOKEN DA CARTA */
.card-token {
    width: 90px;
    height: 120px;
    border-radius: 8px;
    border: 3px solid #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding-top: 10px;
    
    font-size: 0.8rem;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 2px black;
    
    position: relative;
    background-color: #444;
    transition: all 0.3s ease-out;
    margin-top: 0;

    /* --- CORREÇÃO DE INTERAÇÃO --- */
    pointer-events: auto; /* Permite que o mouse interaja com a carta */
    cursor: pointer;      /* Muda cursor para mãozinha */
}

/* Detalhe visual na carta */
.card-token::after {
    content: '';
    width: 80%; height: 45%;
    background-color: rgba(255,255,255,0.15);
    margin-top: 5px;
    border-radius: 4px;
}

/* EFEITO DE HOVER OTIMIZADO */
.card-token:hover {
    /* Usa Transform para não empurrar as outras cartas no layout */
    transform: scale(1.15) translateY(-15px);
    
    z-index: 100; /* Traz para frente */
    box-shadow: 0 15px 30px rgba(0,0,0,0.9);
    border-color: #ffd700; /* Borda Dourada */
}

/* --- SISTEMA DE CÂMERA (ZOOM DINÂMICO) --- */
#pitch-container.camera-focus-mid { transform: scale(1.4); }
#pitch-container.camera-focus-defense { transform: scale(1.5) translateX(25%); }
#pitch-container.camera-focus-attack { transform: scale(1.5) translateX(-25%); }
#pitch-container.camera-focus-goal-left { transform: scale(1.8) translateX(35%); }
#pitch-container.camera-focus-goal-right { transform: scale(1.8) translateX(-35%); }

/* --- UI BARRA INFERIOR --- */
#ui-footer {
    height: 100px;
    background-color: #263238;
    border-top: 5px solid #004d40;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 30px;
    box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
    z-index: 50;
}

.footer-group { display: flex; align-items: center; }
.score-group { width: 25%; }
.team-score { display: flex; flex-direction: column; align-items: center; }
.team-score .label { font-size: 0.8rem; color: #b0bec5; font-weight: bold; }
.team-score .value { font-size: 2rem; font-weight: bold; color: #fff; line-height: 1; }
#score-player { color: #64ffda; }
#score-ia { color: #ffab91; }
.score-divider { font-size: 1.5rem; color: #546e7a; margin: 0 15px; }
.action-group { width: 50%; justify-content: center; gap: 20px; }
#possession-display { font-size: 1rem; color: #eceff1; background-color: #37474f; padding: 8px 20px; border-radius: 20px; border: 1px solid #546e7a; }
#btn-battle { background: linear-gradient(135deg, #00897b, #004d40); color: white; border: none; padding: 15px 60px; font-size: 1.3rem; font-weight: bold; border-radius: 40px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.4); transition: transform 0.1s; letter-spacing: 1px;}
#btn-battle:hover { transform: scale(1.05); filter: brightness(1.1); }
#btn-battle:active { transform: scale(0.98); }
.log-group { width: 25%; justify-content: flex-end; }
#game-info { font-size: 1rem; color: #cfd8dc; text-align: right; }